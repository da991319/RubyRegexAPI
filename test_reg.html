<link href="/RegExp/styles/RegexTool.css" rel="stylesheet" type="text/css" /> 
<script src="http://code.jquery.com/jquery-1.6.2.min.js" type="text/javascript"></script>
<script type="text/javascript">// <![CDATA[ var $j = jQuery;
    
    var $j = jQuery;
    function SetOption() {
    var value = $j("input[name=language]:checked").val();
    switch (value) {
        case "js":
            $j(".JsOption").show();
            $j(".NetOption").hide();
            $j(".PhpOption").hide();
            $j("#PhpWarning").hide();
            break;
        case ".net":
            $j(".NetOption").show();
            $j(".JsOption").hide();
            $j(".PhpOption").hide();
            $j("#PhpWarning").hide();
            break;
        case "php":
            $j(".PhpOption").show();
            $j(".NetOption").hide();
            $j(".JsOption").hide();
            $j("#PhpWarning").show();
            break;
    }
    CheckReg();     
}

function CheckReg() {
    var value = $j("input[name=language]:checked").val();
    switch (value) {
        case "js":
            jsReg();
            break;
        case ".net":
            netReg();
            break;
        case "php":
            phpReg();
            break;
    }
}

function jsReg() {
    if ($j("#TxtSearchString").val().length > 0 && $j("#TxtPattern").val().length > 0) {
        var modifiers = "";
        if ($j("#IgnoreCase").is(":checked")) {
            modifiers = modifiers + "i";
        }

        if ($j("#Multiline").is(":checked")) {
            modifiers = modifiers + "m";
        }

        if ($j("#Global").is(":checked")) {
            modifiers = modifiers + "g"
        }

        var pattern = new RegExp($j("#TxtPattern").val(), modifiers);
        var results = $j("#TxtSearchString").val().match(pattern);
        writeResult(results);
    }
    else {
        $j("#LabelResponse").html("");
        if ($j("#TxtSearchString").val().length == 0) {
            $j("#LabelResponse").append("The searched string is empty <br/>");
        }
        if ($j("#TxtPattern").val().length == 0) {
            $j("#LabelResponse").append("The pattern string is empty");
        }
        if (!$j("#regexpresponse").hasClass("regexresponsenoresult")) {
            $j("#regexpresponse").addClass("regexresponsenoresult");
        }
    }
};

function netReg() {
    var input = $j("#TxtSearchString").val();
    var pattern = $j("#TxtPattern").val();
    if ($j("#TxtSearchString").val().length > 0 && $j("#TxtPattern").val().length > 0) {
        var options = getOptions().join(",");
        $j.ajax({
            type: "POST",
            url: "http://localhost:4567/RegexRuby?callback=?",
            data: { input: input, pattern: pattern, options: options },
            dataType: "jsonp",
            crossDomain: true,
            success: function (d) {
                var results = d;
                var i;
                writeResult(results);
            }
        });
    }
    else {
        $j("#LabelResponse").html("");
        if ($j("#TxtSearchString").val().length == 0) {
            $j("#LabelResponse").append("The searched string is empty <br/>");
        }
        if ($j("#TxtPattern").val().length == 0) {
            $j("#LabelResponse").append("The pattern string is empty");
        }
        if (!$j("#regexpresponse").hasClass("regexresponsenoresult")) {
            $j("#regexpresponse").addClass("regexresponsenoresult");
        }
    }
    
};


function phpReg() {
    var input = $j("#TxtSearchString").val();
    var pattern = $j("#TxtPattern").val();
    if ($j("#TxtSearchString").val().length > 0 && $j("#TxtPattern").val().length > 0) {
        var options = getOptions().join(",");
        $j.ajax({
            type: "POST",
            url: "http://localhost:4567/RegexRuby",
            data: { input: input, pattern: pattern, options: options },
            dataType: "json",
            success: function (d) {
                var results = d;
                writeResult(results);
            }
        });
    }
    else {
        $j("#LabelResponse").html("");
        if ($j("#TxtSearchString").val().length == 0) {
            $j("#LabelResponse").append("The searched string is empty <br/>");
        }
        if ($j("#TxtPattern").val().length == 0) {
            $j("#LabelResponse").append("The pattern string is empty");
        }
        if (!$j("#regexpresponse").hasClass("regexresponsenoresult")) {
            $j("#regexpresponse").addClass("regexresponsenoresult");
        }
    }
    
};

function writeResult(results) {
    $j("#LabelResponse").html("");
    if (results.length > 0) {
        $j("#LabelResponse").html("");
        if (results.length == 1) {
            $j("#LabelResponse").append("1 match found:<br/>");
        }
        else {
            $j("#LabelResponse").append(results.length + " matches found:<br/>");
        }
        for (i = 0; i < results.length; i++) {
            $j("#LabelResponse").append((i + 1) + ": " + results[i] + "<br />");
        }
    }
    else {
        $j("#LabelResponse").html("No Match found");
    }
    if ($j("#regexpresponse").hasClass("regexresponsenoresult")) {
        $j("#regexpresponse").removeClass("regexresponsenoresult");
    }
}

function getOptions() {
    var options = [];
    $j("#OptionsDiv input:checked").each(function () {
        options.push($j(this).val());
    });

    return options;
}

    
    $j(document).ready(function () {
	$j("textarea").change(function () {
	    CheckReg();
	}
			     );
	$j("#BtnGo").click(function () {
	    CheckReg();
	}); $j("#DivFramework input:radio").click(function () {
	    SetOption();
	}); SetOption();
    });
// ]]></script>
&nbsp;<br /> <div id="regexpmain"><br /> <div id="DivFramework"><fieldset
class="regextool"><legend>Language</legend><input type="radio" name="language"
id="language1" value="js" checked="checked" /> <label
for="language1">Javascript</label> <input type="radio" name="language"
id="language2" value=".net" /> <label for="language2">C#</label> <input
type="radio" name="language" id="language3" value="php" /> <label
for="language2">PHP</label></fieldset></div> <div id="OptionsDiv"><fieldset
class="regextool"><legend>Options</legend><label for="IgnoreCase">Ignore
Case</label> <input id="IgnoreCase" type="checkbox" value="IgnoreCase" /> <label
for="Global" class="JsOption">Global</label> <input id="Global" type="checkbox"
class="JsOption" value="Global" /> <label for="Multiline"
class="JsOption">Multiline</label> <input id="Multiline" type="checkbox"
class="JsOption" value="Multiline" /> <label for="Global"
class="PhpOption">Global</label> <input id="Global" type="checkbox"
class="PhpOption" value="Global" /> <label for="Multiline"
class="PhpOption">Multiline</label> <input id="Multiline" type="checkbox"
class="PhpOption" value="Multiline" /> <label for="CheckCult"
class="NetOption">Culture Invariant</label> <input id="CheckCult"
type="checkbox" class="NetOption" value="CheckCult" /> <label
for="ExplicitCapture" class="NetOption">ExplicitCapture</label> <input
id="ExplicitCapture" type="checkbox" class="NetOption" value="ExplicitCapture"
/> <label for="IgnorePatterWhiteSpace"
class="NetOption">IgnorePatterWhiteSpace</label> <input
id="IgnorePatterWhiteSpace" type="checkbox" class="NetOption"
value="IgnorePatterWhiteSpace" /> <label for="RightToLeft"
class="NetOption">RightToLeft</label> <input id="RightToLeft" type="checkbox"
class="NetOption" value="RightToLeft" /> <label for="SingleLine"
class="NetOption">SingleLine</label> <input id="SingleLine" type="checkbox"
class="NetOption" value="SingleLine" /></fieldset></div> <div
id="regexpsearch"><fieldset class="regextool"><legend>Search String</legend>
<textarea id="TxtSearchString" class="regextool"></textarea></fieldset></div>
<div id="regexppattern"><fieldset
class="regextool"><legend>Pattern</legend><label id="PhpWarning">Do not include
heading and trailing forward slashes when defining the pattern</label> <textarea
class="regextool" id="TxtPattern"></textarea></fieldset></div> <div
class="regexresponse" id="regexpresponse"><label id="LabelResponse">The searched
string or the pattern string is empty</label></div> <div><input type="button"
id="BtnGo" value="Check" /></div> </div>
	<noscript> <h4 class="noscriptError">Unfortunately you have Javascript
	disabled, please enable Javascript in order to experience the comments
	correctly</h4>
</noscript>
